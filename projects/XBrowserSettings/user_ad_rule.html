<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>规则</title>

    
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">

    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

      

      <link href="css/ratchet.css" rel="stylesheet">
      <link href="css/ratchet-theme-ios.min.css" rel="stylesheet">
      <link href="mbrowser.css" rel="stylesheet">

      
      <script src="js/ratchet.js"></script>
      <script src="mbrowser.js"></script>
      <script src="js/slip.js"></script>


    <script>function removeAdRule(e){var t=document.getElementById("custom-rule-list");for(items=t.getElementsByTagName("li"),i=0;i<items.length;i++)if(item=items[i],item.getAttribute("rule-hash")==e){t.removeChild(item);break}mbrowser.removeAdRule(e)}function loadCustomAdRules(e,t,r){var i=document.querySelector(".content"),l=(0==r&&(i.innerHTML=""),JSON.parse(mbrowser.getCustomAdRules(e,t,r)));if(0<l.length){var s=document.createElement("ul");s.setAttribute("id","custom-rule-list"),s.setAttribute("class","table-view my-list");for(var n=0;n<l.length;n++){item=document.createElement("li"),item.setAttribute("rule-hash",l[n].rule_hash),item.setAttribute("class","table-view-cell my-cell");var o='<p style="word-wrap: break-word;">'+mbrowser.getStringResource("web_str_adb_rule")+l[n].rule+"</p>",m="<button onclick=\"removeAdRule('"+l[n].rule_hash+'\')"  class="btn btn-positive pull-right">'+mbrowser.getStringResource("web_str_btn_delete")+"</button>";item.innerHTML='<div class="media-body">'+l[n].origin_host+o+"</div>"+m,s.appendChild(item)}i.appendChild(s)}else{e=document.createElement("div");e.setAttribute("class","content-placeholder"),e.innerHTML="No Data",i.appendChild(e)}}</script>

  </head>


  <body>

    
     <header class="bar bar-nav">
         <a href="#popover">

             <h1 id="element" class="title">
                 <script>var filter=getQueryString("filter");filter&&0<filter.indexOf(".")?document.write(mbrowser.getStringResource("web_str_rule_item")+"@"+filter):document.write(mbrowser.getStringResource("web_str_rule_item"))</script>规则

             </h1>

             <a href="x:cr" class="btn pull-right" onclick="location.href='custom_rule.html'"><script>_str("web_str_btn_new")</script>新增</a>
             
         </a>


     </header>

    <div class="content">


    </div>


    <script type="text/javascript">var filter=(filter=getQueryString("filter"))||"all",count=mbrowser.getCountCustomAdRules(),offset=0,page_size=50,page_count=1,keyword="";page_size<count&&enable_listen_scroll(),window.addEventListener("scroll",function(){var e=window.scrollY,t=window.innerHeight;document.body.scrollHeight-2<=e+t&&(offset=page_size*page_count)<count&&(loadCustomAdRules(filter,page_size,offset),page_count++)}),loadCustomAdRules(filter,page_size,offset)</script>



  </body>
</html>